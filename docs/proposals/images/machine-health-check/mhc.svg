<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="702" height="727" contentScriptType="application/ecmascript" contentStyleType="text/css" style="width:702px;height:727px" preserveAspectRatio="none" version="1.1" viewBox="0 0 702 727" zoomAndPan="magnify"><defs><filter id="ffy31wj92py31" width="300%" height="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="243.5" cy="20" fill="#000" filter="url(#ffy31wj92py31)" rx="10" ry="10" style="stroke:none;stroke-width:1"/><rect style="stroke:#a80036;stroke-width:1.5" width="223" height="33.969" x="132" y="50" fill="#FEFECE" filter="url(#ffy31wj92py31)" rx="12.5" ry="12.5"/><text x="142" y="71.139" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="203">Machine Health Check controller</text><rect style="stroke:#a80036;stroke-width:1.5" width="97" height="33.969" x="195" y="191.969" fill="#FEFECE" filter="url(#ffy31wj92py31)" rx="12.5" ry="12.5"/><text x="205" y="213.107" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="77">Watch MHCs</text><rect style="stroke:#a80036;stroke-width:1.5" width="444" height="33.969" x="21.5" y="253.438" fill="#FEFECE" filter="url(#ffy31wj92py31)" rx="12.5" ry="12.5"/><text x="31.5" y="274.576" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="424">Find unhealthy targets: Need remediation or going towards timeout</text><polygon fill="#FEFECE" points="243.5 147.969 255.5 159.969 243.5 171.969 231.5 159.969 243.5 147.969" filter="url(#ffy31wj92py31)" style="stroke:#a80036;stroke-width:1.5"/><polygon fill="#FEFECE" points="145.5 307.406 341.5 307.406 353.5 319.406 341.5 331.406 145.5 331.406 133.5 319.406 145.5 307.406" filter="url(#ffy31wj92py31)" style="stroke:#a80036;stroke-width:1.5"/><text x="145.5" y="323.214" fill="#000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="196">unhealthyTargets &gt; maxUnhealthy</text><text x="353.5" y="316.812" fill="#000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20">yes</text><polygon fill="#FEFECE" points="243.5 103.969 255.5 115.969 243.5 127.969 231.5 115.969 243.5 103.969" filter="url(#ffy31wj92py31)" style="stroke:#a80036;stroke-width:1.5"/><polygon fill="#FEFECE" points="32 372.903 455 372.903 467 384.903 455 396.903 32 396.903 20 384.903 32 372.903" filter="url(#ffy31wj92py31)" style="stroke:#a80036;stroke-width:1.5"/><text x="32" y="388.711" fill="#000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="423">API server machine deletion requests for machines that need remediation</text><text x="467" y="382.309" fill="#000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="223">requeue with minTime to timeout delay</text><rect style="stroke:#a80036;stroke-width:1.5" width="391" height="61.906" x="48" y="438.302" fill="#ADD8E6" filter="url(#ffy31wj92py31)" rx="12.5" ry="12.5"/><text x="58" y="459.44" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="371">The machine owner controller watches deletion timestamp.</text><text x="58" y="473.409" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="297">Reconciles towards desired number of replicas.</text><text x="58" y="487.378" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="314">The process to create a new machine/node starts</text><rect style="stroke:#a80036;stroke-width:1.5" width="334" height="33.969" x="76.5" y="520.208" fill="#ADD8E6" filter="url(#ffy31wj92py31)" rx="12.5" ry="12.5"/><text x="86.5" y="541.347" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="314">The machine controller drains the unhealthy node</text><rect style="stroke:#a80036;stroke-width:1.5" width="419" height="33.969" x="34" y="574.177" fill="#ADD8E6" filter="url(#ffy31wj92py31)" rx="12.5" ry="12.5"/><text x="44" y="595.315" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="399">The machine controller provider deletes the unhealthy instance</text><rect style="stroke:#a80036;stroke-width:1.5" width="420" height="33.969" x="33.5" y="628.145" fill="#ADD8E6" filter="url(#ffy31wj92py31)" rx="12.5" ry="12.5"/><text x="43.5" y="649.284" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="400">The machine controller removes the unhealthy machine finalizer</text><rect style="stroke:#a80036;stroke-width:1.5" width="374" height="33.969" x="56.5" y="682.114" fill="#ADD8E6" filter="url(#ffy31wj92py31)" rx="12.5" ry="12.5"/><text x="66.5" y="703.253" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="354">The API server removes the unhealthy machine resource</text><line style="stroke:#a80036;stroke-width:1.5" x1="243.5" x2="243.5" y1="30" y2="50"/><polygon fill="#A80036" points="239.5 40 243.5 50 247.5 40 243.5 44" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="243.5" x2="243.5" y1="225.938" y2="253.438"/><polygon fill="#A80036" points="239.5 243.438 243.5 253.438 247.5 243.438 243.5 247.438" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="243.5" x2="243.5" y1="171.969" y2="191.969"/><polygon fill="#A80036" points="239.5 181.969 243.5 191.969 247.5 181.969 243.5 185.969" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="353.5" x2="477.5" y1="319.406" y2="319.406"/><polygon fill="#A80036" points="473.5 245.938 477.5 235.938 481.5 245.938 477.5 241.938" style="stroke:#a80036;stroke-width:1.5"/><line style="stroke:#a80036;stroke-width:1.5" x1="477.5" x2="477.5" y1="159.969" y2="319.406"/><line style="stroke:#a80036;stroke-width:1.5" x1="477.5" x2="255.5" y1="159.969" y2="159.969"/><polygon fill="#A80036" points="265.5 155.969 255.5 159.969 265.5 163.969 261.5 159.969" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="243.5" x2="243.5" y1="287.406" y2="307.406"/><polygon fill="#A80036" points="239.5 297.406 243.5 307.406 247.5 297.406 243.5 301.406" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="243.5" x2="243.5" y1="127.969" y2="147.969"/><polygon fill="#A80036" points="239.5 137.969 243.5 147.969 247.5 137.969 243.5 141.969" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="467" x2="501.5" y1="384.903" y2="384.903"/><polygon fill="#A80036" points="497.5 245.938 501.5 235.938 505.5 245.938 501.5 241.938" style="stroke:#a80036;stroke-width:1.5"/><line style="stroke:#a80036;stroke-width:1.5" x1="501.5" x2="501.5" y1="115.969" y2="384.903"/><line style="stroke:#a80036;stroke-width:1.5" x1="501.5" x2="255.5" y1="115.969" y2="115.969"/><polygon fill="#A80036" points="265.5 111.969 255.5 115.969 265.5 119.969 261.5 115.969" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="243.5" x2="243.5" y1="331.406" y2="372.903"/><polygon fill="#A80036" points="239.5 362.903 243.5 372.903 247.5 362.903 243.5 366.903" style="stroke:#a80036;stroke-width:1"/><text x="247.5" y="352.711" fill="#000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14">no</text><line style="stroke:#a80036;stroke-width:1.5" x1="243.5" x2="243.5" y1="83.969" y2="103.969"/><polygon fill="#A80036" points="239.5 93.969 243.5 103.969 247.5 93.969 243.5 97.969" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#00f;stroke-width:1.5;stroke-dasharray:7,7" x1="243.5" x2="243.5" y1="396.903" y2="438.302"/><polygon fill="#00F" points="239.5 428.302 243.5 438.302 247.5 428.302 243.5 432.302" style="stroke:#00f;stroke-width:1"/><text x="247.5" y="418.207" fill="#000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67">Out of band</text><line style="stroke:#a80036;stroke-width:1.5" x1="243.5" x2="243.5" y1="500.208" y2="520.208"/><polygon fill="#A80036" points="239.5 510.208 243.5 520.208 247.5 510.208 243.5 514.208" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="243.5" x2="243.5" y1="554.177" y2="574.177"/><polygon fill="#A80036" points="239.5 564.177 243.5 574.177 247.5 564.177 243.5 568.177" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="243.5" x2="243.5" y1="608.145" y2="628.145"/><polygon fill="#A80036" points="239.5 618.145 243.5 628.145 247.5 618.145 243.5 622.145" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="243.5" x2="243.5" y1="662.114" y2="682.114"/><polygon fill="#A80036" points="239.5 672.114 243.5 682.114 247.5 672.114 243.5 676.114" style="stroke:#a80036;stroke-width:1"/></g></svg>